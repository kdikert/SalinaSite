{% extends "salinaadmin/base.html" %}
{% load i18n %}
{% load salinatags %}

{% block content %}


<h1>
{% trans "Editing product" %}: {{ product.name_text.get_current_translation }}
</h1>

<form action="" method="post">
    {% csrf_token %}
    <table>
    {{form.as_table}}
    <tr>
        <th>{% trans "Displayed name:" %}</th>
        <td>
            {% for locale_code, locale_name, transl in product.name_text.get_translation_entries_per_locale_with_name %}
            {{locale_name}}:
            {% if transl %}{{transl.text}}{% else %}-{% endif %}
            <br/>
            {% endfor %}
            (<a class="edit" href="{% url admin_text_edit product.name_text.entry_id %}">{% trans "Edit name" %}</a>)
        </td>
    </tr>
    </table>
    
    <table>
    <tr>
        <th></th>
        <th>{% trans "Time" %}</th>
        <th>{% trans "Price" %}</th>
        {% for material_column in product.material_columns.all %}
        <th>{{material_column.get_text_translated}}</th>
        {% endfor %}
    </tr>
    
    {% for product_part in product.parts.all %}
    <tr>
        <td>{{product_part.name_text.get_current_translation}}</td>
        <td>{{product_part.time_min|minutes_to_hours}}</td>
        <td>{{product_part.price}}</td>
        {% for column in product_part.get_columns %}
        <td>
        {% if column %}
        {{column.get_text_translated}}
        {% else %}
        -
        {% endif %}
        </td>
        {% endfor %}
    </tr>
    {% endfor %}
    
    </table>
    
    <div class="section submit_section">
        <input class="submit_button" type="submit" value="{% trans 'Save' %}"/>
        <a class="cancel_button" href="{% url admin_productgroup_index %}">{% trans "Cancel" %}</a>
    </div>
</form>

{% endblock %}
